<DetailsScreen>:
    # on_pre_enter: app.set_it_out()
    

    MDBoxLayout:
        id: dude
        orientation: 'vertical'
        
        RecycleView:
            effect_cls: 'ScrollEffect'
            id: refresh
            scroll_distance: 1
            bar_width: 0
            
         
           
            MDBoxLayout:
                orientation: 'vertical'
                spacing: "35dp"
                adaptive_height: True
                size_hint_y: None
                
                    
                MDCard:
                    padding: [0]
                    md_bg_color: 0,0,0,0.3
                    radius: [0]
                    size_hint_y: None
                    height: Window.size[1] / 2
                    on_press: 
                        self.height=Window.size[1] / 1.3 if self.height == Window.size[1] / 2 else Window.size[1] / 2
                        house_image.keep_ratio = False 
                    
                    RelativeLayout:
                        AsyncImage:
                            source: str(root.image)
                            
                            id: house_image
                            keep_ratio: False if Window.size[1] > Window.size[0] else True
                            allow_stretch: True
                            # mipmap: True
                        AnchorLayout:
                            anchor_x: 'left'
                            anchor_y: 'top'
                            padding: ["20dp"]
                            MDIconButton:
                                icon: "arrow-left"
                                
                                on_press: app.play()
                                on_release: app.switch_from_details()
                                ripple_behavior: True
                                icon_size: "24sp"
                                md_bg_color: 1,1,1,1
                        
                        AnchorLayout:
                            anchor_x: 'right'
                            anchor_y: 'top'
                            padding: ["20dp"]
                            MDIconButton:
                                icon: "flag-variant-outline"
                                id: bk_ico
                                on_press: app.play()
                                on_release: self.icon='flag-variant' if self.icon == 'flag-variant-outline' else 'flag-variant-outline'
                                on_release: app.bookmark(root.key, root.me)
                                ripple_behavior: True
                                icon_size: "24sp"
                                md_bg_color: 1,1,1,1

                        AnchorLayout:
                            anchor_x: 'left'
                            anchor_y: 'bottom'
                            padding: ["20dp","0dp","0dp","20dp"]
                            MDLabel:
                                text: root.price
                                color: 'white'
                                font_size: '23dp'
                                size_hint_y: None
                                adaptive_height: True
                                bold: True
                                    
                                    
                
                
                MDBoxLayout:
                    orientation: 'vertical'
                    spacing: "20dp"
                    size_hint_y: None
                    adaptive_height: True
                    padding: ["15dp","15dp","10dp","0dp"]
                    
                    MDLabel:
                        text: root.type
                        size_hint_y: None
                        adaptive_height: True
                        font_size: "20dp"
                        color: "black"
                        bold: True
                        
                    BoxLayout:
                        size_hint_y: None
                        height: '18dp'
                        
                        MDIcon:
                            icon: 'map-marker-outline'
                            size_hint: None, None
                            adaptive_size: True
                            font_size: '18dp'
                            pos_hint: {'center_y': 0.5}
                            
                        MDLabel:
                            id: count
                            text: root.country + ", " + root.province + ", " + root.town + ", " + root.street
                            font_size: "15dp"
                            color: "gray"
                            size_hint_y: None
                            adaptive_height: True
                            
                        # MDLabel:
                        #     text: root.town + " "
                        #     font_size: "13dp"
                        #     color: "gray"
                        #     size_hint: None, None
                        #     adaptive_size: True
                            
                        # MDLabel:
                        #     text: root.street
                        #     font_size: "13dp"
                        #     color: 'gray'
                        #     size_hint: None, None
                        #     adaptive_size: True
                        #     height: count.height
                            

                    
                    ButtonCard:
                        size_hint: None, None
                        width: gmaps_icon.width + gmaps_label.width + 25
                        height: '50dp'
                        radius: [10,]
                        padding: [5,10,5,10]
                        on_press: app.open_maps(root.country + ',' + " " + root.town + ',' + " " + root.street)
                        ripple_behavior: True
                        canvas.before:
                            Color:
                                rgba: (1,1,1,1)
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                                radius: [dp(10),]
                        
                        
                        MDIcon:
                            icon: 'google-maps'
                            size_hint: None, None
                            adaptive_size: True
                            font_size: '18dp'
                            id: gmaps_icon
                            
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            halign: 'center'
                                
                        MDLabel:
                            text: 'google maps'
                            font_size: '17dp'
                            size_hint: None, None
                            adaptive_size: True
                            id: gmaps_label
                            
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                            halign: 'center'
                            
                BoxLayout:
                    size_hint_y: None
                    height: landspace.height * 2
                    spacing: "10dp"
                    padding: ["15dp","5dp","10dp","0dp"]
                    BedroomsCard:
                        size_hint_y: None
                        height: landspace.height * 2
                        radius: [10,]
                        padding: [5,]
                        MDLabel:
                            halign: 'center'
                            text: root.bedrooms + " " + 'bedrooms'
                            font_size: '15dp'
                            id: bedrooms
                            size_hint_y: None
                            adaptive_height: True
                            valign: 'center'
                            halign: 'center'
                            
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    BathroomsCard:
                        size_hint_y: None
                        height: landspace.height * 2
                        radius: [10,]
                        padding: [5]
                        MDLabel:
                            halign: 'center'
                            text: root.bathrooms + " " + 'bathrooms'
                            font_size: '15dp'
                            id: bathrooms
                            size_hint_y: None
                            adaptive_height: True
                            valign: 'center'
                            halign: 'center'
                            
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    LandspaceCard:
                        size_hint_y: None
                        height: landspace.height * 2
                        radius: [10,]
                        padding: [5]
                        MDLabel:
                            halign: 'center'
                            text: root.landspace + " " + 'land'
                            font_size: '15dp'
                            size_hint_y: None
                            adaptive_height: True
                            id: landspace
                            valign: 'center'
                            halign: 'center'
                            
                            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                MDBoxLayout:
                    size_hint_y: None
                    adaptive_height: True
                    orientation: 'vertical'
                    padding: ["15dp","15dp","0dp","0dp"]
                    spacing: "30dp"
                    id: rules
                    MDLabel:
                        text: f'[b]Description[/b] \n \n[color=#9A9A9A][size=14dp]{root.description}[/size][/color]'
                        size_hint_y: None
                        adaptive_height: True
                        font_size: "20dp"
                        color: "black"
                        
                        
                        
                        markup: True

                # MDLabel:
                #     text: f'[b]Rules[/b] \n \n[color=#9A9A9A][size=14dp]Check In before: {root.checkin} \n \nCheck In after: {root.checkout}[/size][/color]'
                #     size_hint_y: None
                #     adaptive_height: True
                #     font_size: "20dp"
                #     padding_x: '15dp'
                #     color: 'black'
                    
                    # MDLabel:
                    #     text: root.description
                    #     size_hint_y: None
                    #     adaptive_height: True
                    #     font_size: '14dp'
                    #     color: 'gray'
                MDBoxLayout:
                    padding: ["20dp"]
                    size_hint_y: None
                    adaptive_height: True
                    Further:
                        radius: [10]
                        padding: ["10dp","20dp","10dp","50dp"]
                        elevation: 0
                        orientation: 'vertical'
                        size_hint_y: None
                        height: (grody.height + grodyo.height + grodyi.height + tech.height + cooling.height + ext.height + further_amenities.height) * 2
                        # adaptive_height: True
                        spacing: "30dp"
                        MDLabel:
                            text: 'Further Amenities'
                            halign: 'center'
                            font_size: '23dp'
                            bold: True
                            size_hint_y: None
                            adaptive_height: True
                            id: further_amenities
                            pos_hint: {'center_y': 0.5}


                        MDLabel:
                            text: 'Food and Nutrition'
                            
                            font_size: '20dp'
                            
                            size_hint_y: None
                            adaptive_height: True
                            id: cooling

                        MDGridLayout:
                            spacing: "20dp"
                            cols: 2
                            id: grody
                            
                            size_hint_y: None
                            adaptive_height: True
                            
                            
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'stove'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Kitchen'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: fan
                                

                            MDLabel:
                                text: root.amenities[7]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[7] == 'Yes' else False


                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'food'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Dining'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: fan
                                

                            MDLabel:
                                text: root.amenities[8]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[8] == 'Yes' else False





                        
                        MDLabel:
                            text: 'Cooling and Heating'
                            
                            font_size: '20dp'
                            
                            size_hint_y: None
                            adaptive_height: True
                            id: cooling
                            

                        MDGridLayout:
                            spacing: "20dp"
                            cols: 2
                            id: grody
                            
                            size_hint_y: None
                            adaptive_height: True
                            
                            
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'fan'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Fans'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: fan
                                

                            MDLabel:
                                text: root.amenities[0]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[0] == 'Yes' else False
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'snowflake'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'

                                MDLabel:
                                    text: 'Air Conditioner'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: ac
                                
                            MDLabel:
                                text: root.amenities[1]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[1] == 'Yes' else False

                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'pool'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Swimming Pool'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: swim
                                
                            MDLabel:
                                text: root.amenities[3]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[3] == 'Yes' else False

                        

                        
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'water-boiler'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Water Heater' 
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wh
                                
                            MDLabel:
                                text: root.amenities[2]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[2] == 'Yes' else False

                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'bathtub'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Bathtub' 
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wh
                                
                            MDLabel:
                                text: root.amenities[10]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[10] == 'Yes' else False

                            

                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'fireplace'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Fireplace' 
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wh
                                
                            MDLabel:
                                text: root.amenities[9]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[9] == 'Yes' else False


                                
                        MDLabel:
                            text: 'Tech and Entertainment'
                            
                            font_size: '20dp'
                            
                            size_hint_y: None
                            adaptive_height: True
                            id: tech
                            
                        MDGridLayout:
                            spacing: "20dp"
                            cols: 2
                            id: grodyo
                            
                            size_hint_y: None
                            adaptive_height: True
                            
                            
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'wifi'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Wifi'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wifi
                                
                            MDLabel:
                                text: root.amenities[4]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[4] == 'Yes' else False

                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'laptop'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Workspace'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wifi
                                
                            MDLabel:
                                text: root.amenities[12]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[12] == 'Yes' else False

                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'television'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'TV'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: wifi
                                
                            MDLabel:
                                text: root.amenities[11]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[11] == 'Yes' else False

                        MDLabel:
                            text: 'Exterior'
                            
                            font_size: '20dp'
                            
                            size_hint_y: None
                            adaptive_height: True
                            id: ext
                            
                        MDGridLayout:
                            spacing: "20dp"
                            cols: 2
                            id: grodyi
                            
                            size_hint_y: None
                            adaptive_height: True
                            
                            
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'car-outline'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'Parking'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: garage
                                
                            MDLabel:
                                text: root.amenities[5]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[5] == 'Yes' else False
                            BoxLayout:
                                size_hint_y: None
                                height: '14dp'
                                spacing: "10dp"
                                MDIcon:
                                    icon: 'flower'
                                    size_hint: None, None
                                    adaptive_size: True
                                    font_size: '18dp'
                                MDLabel:
                                    text: 'backyard'
                                    font_size: '14dp'
                                    size_hint_y: None
                                    adaptive_height: True
                                    id: garage
                                
                            MDLabel:
                                text: root.amenities[6]
                                size_hint_y: None
                                adaptive_height: True
                                font_size: '14dp'
                                bold: True if root.amenities[6] == 'Yes' else False
                                


                
                        
                
                
        MDBoxLayout:
            
            size_hint_y: None
            height: biye.height * 1.5
            padding: [10,]
            pos_hint: {'center_y': 0.1}
            id: dude
            md_bg_color: 1,1,1,1
            Buy:
                md_bg_color: app.theme_cls.primary_color
                radius: ["5dp",]
                ripple_behavior: True
                size_hint_y: None
                height: buy.height * 3
                
                id: biye
                pos_hint: {'center_y': 0.5}
                on_release: app.send_thread_email(root.email, root.phonenumber, root.twitter, root.facebook, root.link, root.type, root.price, root.country, root.bedrooms, root.bathrooms, root.landspace, root.town, root.province, root.street, root.key)
                on_press: app.sound()
                RelativeLayout:
                    MDLabel:
                        text: "Offer"
                        halign: "center"
                        color: "white"
                        font_size: "13dp"
                        bold: True
                        id: buy
                        size_hint_y: None
                        adaptive_height: True
                        id: buy
                        pos_hint: {'center_y': 0.5}
                    MDSpinner:
                        size_hint: None, None
                        height: '13dp'
                        width: '13dp'
                        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                        color: "white"
                        active: False
                        id: spin
                    
            
                    

<Further@MDCard+CommonElevationBehavior>
<ImageCard@MDCard+CommonElevationBehavior>
<BedroomsCard@MDCard+CommonElevationBehavior>
<BathroomsCard@MDCard+CommonElevationBehavior>
<LandspaceCard@MDCard+CommonElevationBehavior>
<Buy@MDCard+CommonElevationBehavior>
<MapsCard@MDCard+CommonElevationBehavior>




